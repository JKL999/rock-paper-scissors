<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        function computerPlay() {
            choice = Math.floor(Math.random() * 3);
            let hand = "";
            if (choice == 0) {hand = "Rock"}
            else if (choice == 1) {hand = "Paper"}
            else if (choice == 2) {hand = "Scissors"}
            return hand;
        }
        
        function humanPlay() {
            let hand = prompt("Choose Rock, Paper, or Scissors")
            let check = hand.toLowerCase();
            if (check == 'rock' || check == 'paper' || check == 'scissors') {
                return capitalize(hand);
            } else {
                hand = "";
                check = "";
                alert("Please make a valid entry");
                humanPlay();
                return;
            }
        }

        function playRound(playerSelection, computerSelection) {
            let win = "You Win! " + playerSelection + " beats " + computerSelection;
            let lose = "You Lose! " + computerSelection + " beats " + playerSelection;
            let draw = "It's a Draw! You both picked " + playerSelection
            switch(playerSelection) {
                case "Rock":
                    if(computerSelection == "Scissors") return win;
                    else if(computerSelection == "Paper") return lose;
                    else return draw;
                    break;   
                case "Paper":
                    if(computerSelection == "Rock") return win;
                    else if(computerSelection == "Scissors") return lose;
                    else return draw;
                    break;
                case "Scissors":
                    if(computerSelection == "Paper") return win;
                    else if(computerSelection == "Rock") return lose;
                    else return draw;
                    break; 
            }   
        }

        function capitalize(str) {
            if (str == undefined) {
                let result = humanPlay();
                return result;
            } else {
                return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase()
            }
        }

        function game() {
            let score = new Array(2);
            score[0] = 0;
            score[1] = 0;
            let rounds = 5;
            let i;
            while(score[0] < rounds - 2 || score[1] < rounds - 2) {
                const playerSelection = capitalize(humanPlay())
                const computerSelection = computerPlay()
                //console.log(computerSelection)
                console.log("You chose: " + playerSelection)
                console.log("Computer chose: " + computerSelection)
                const result = playRound(playerSelection, computerSelection)
                print_Match_Result(result)
                if(result.includes("Win")) {
                    score[0]++
                } else if (result.includes("Lose")) {
                    score[1]++
                } else {printScore(score)}
                printScore(score)
            }
            if(score[0] > score[1]) {
                showWinningMessage()
            } else {showLosingMessage()}

            score[0] = 0;
            score[1] = 0;
            i = 0;
        }

        function printScore(array) {
            console.log("The Score is: " + array[0] + " Player vs " + array[1] + " Computer")
        }

        function print_Match_Result(str) {
            console.log(str)
        }

        function showWinningMessage() {
            console.log("Congratualtions! You won the game!")
        }

        function showLosingMessage() {
            console.log("You lose! Try again?")
        }
        game();
    </script>
</body>
</html>